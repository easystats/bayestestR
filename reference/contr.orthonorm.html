<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Returns a design or model matrix of orthonormal contrasts such that the
marginal prior on all effects is identical (see 'Details'). Implementation
from Singmann &amp;amp; Gronau's bfrms,
following the description in Rouder, Morey, Speckman, &amp;amp; Province (2012, p.
363).

Though using this factor coding scheme might obscure the interpretation of
parameters, it is essential for correct estimation of Bayes factors for
contrasts and order restrictions of multi-level factors (where k&amp;gt;2). See
info on specifying correct priors for factors with more than 2 levels in
the Bayes factors vignette."><title>Orthonormal Contrast Matrices for Bayesian Estimation — contr.orthonorm • bayestestR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Orthonormal Contrast Matrices for Bayesian Estimation — contr.orthonorm"><meta property="og:description" content="Returns a design or model matrix of orthonormal contrasts such that the
marginal prior on all effects is identical (see 'Details'). Implementation
from Singmann &amp;amp; Gronau's bfrms,
following the description in Rouder, Morey, Speckman, &amp;amp; Province (2012, p.
363).

Though using this factor coding scheme might obscure the interpretation of
parameters, it is essential for correct estimation of Bayes factors for
contrasts and order restrictions of multi-level factors (where k&amp;gt;2). See
info on specifying correct priors for factors with more than 2 levels in
the Bayes factors vignette."><meta property="og:image" content="/reference/figures/card.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@easystats4u"><meta name="twitter:site" content="@easystats4u"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">bayestestR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.12.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Features</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/bayestestR.html">Get started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-examples">Examples</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-examples">
    <a class="dropdown-item" href="../articles/example1.html">1. Initiation to Bayesian models</a>
    <a class="dropdown-item" href="../articles/example2.html">2. Confirmation of Bayesian skills</a>
    <a class="dropdown-item" href="../articles/example3.html">3. Become a Bayesian master</a>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/credible_interval.html">Credible Intervals (CI)</a>
    <a class="dropdown-item" href="../articles/region_of_practical_equivalence.html">Region of Practical Equivalence (ROPE)</a>
    <a class="dropdown-item" href="../articles/probability_of_direction.html">Probability of Direction (pd)</a>
    <a class="dropdown-item" href="../articles/bayes_factors.html">Bayes Factors (BF)</a>
    <a class="dropdown-item" href="../articles/web_only/indicesEstimationComparison.html">Comparison of Point-Estimates</a>
    <a class="external-link dropdown-item" href="https://www.frontiersin.org/articles/10.3389/fpsyg.2019.02767/full">Comparison of Indices of Effect Existence</a>
    <a class="dropdown-item" href="../articles/mediation.html">Mediation Analysis: Direct and Indirect Effects</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/guidelines.html">Guidelines</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="http://twitter.com/easystats4u" aria-label="Twitter">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/easystats/bayestestR/" aria-label="GitHub">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Orthonormal Contrast Matrices for Bayesian Estimation</h1>
      <small class="dont-index">Source: <a href="https://github.com/easystats/bayestestR/blob/HEAD/R/contr.orthonorm.R" class="external-link"><code>R/contr.orthonorm.R</code></a></small>
      <div class="d-none name"><code>contr.orthonorm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Returns a design or model matrix of orthonormal contrasts such that the
marginal prior on all effects is identical (see 'Details'). Implementation
from Singmann &amp; Gronau's <a href="https://github.com/bayesstuff/bfrms/" class="external-link"><code>bfrms</code></a>,
following the description in Rouder, Morey, Speckman, &amp; Province (2012, p.
363).
<br><br>
Though using this factor coding scheme might obscure the interpretation of
parameters, it is essential for correct estimation of Bayes factors for
contrasts and order restrictions of multi-level factors (where <code>k&gt;2</code>). See
info on specifying correct priors for factors with more than 2 levels in
<a href="https://easystats.github.io/bayestestR/articles/bayes_factors.html" class="external-link">the Bayes factors vignette</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">contr.orthonorm</span><span class="op">(</span><span class="va">n</span>, contrasts <span class="op">=</span> <span class="cn">TRUE</span>, sparse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>n</dt>
<dd><p>a vector of levels for a factor, or the number of levels.</p></dd>


<dt>contrasts</dt>
<dd><p>a logical indicating whether contrasts should be
    computed.</p></dd>


<dt>sparse</dt>
<dd><p>logical indicating if the result should be sparse
    (of class <code><a href="https://rdrr.io/pkg/Matrix/man/dgCMatrix-class.html" class="external-link">dgCMatrix</a></code>), using
    package <a href="https://CRAN.R-project.org/package=Matrix" class="external-link"><span class="pkg">Matrix</span></a>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>matrix</code> with n rows and k columns, with k=n-1 if contrasts is
<code>TRUE</code> and k=n if contrasts is <code>FALSE</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>When <code>contrasts = FALSE</code>, the returned contrasts are equivalent to
<code>contr.treatment(, contrasts = FALSE)</code>, as suggested by McElreath (also known
as one-hot encoding).</p><div class="section">
<h3 id="setting-priors">Setting Priors<a class="anchor" aria-label="anchor" href="#setting-priors"></a></h3>


<p>It is recommended to set 0-centered, identically-scaled priors on the dummy
coded variables produced by this method. These priors then represent the
distance the mean of one of the levels might have from the overall mean.</p><div class="section">
<h4 id="contrasts">Contrasts<a class="anchor" aria-label="anchor" href="#contrasts"></a></h4>


<p>This method guarantees that any set of contrasts between the <em>k</em> groups will
have the same multivariate prior regardless of level order; However,
different contrasts within a set contrasts can have different univariate
prior shapes/scales.
<br><br>
For example the contrasts <code>A - B</code> will have the same prior as <code>B - C</code>, as
will <code>(A + C) - B</code> and <code>(B + A) - C</code>, but <code>A - B</code> and <code>(A + C) - B</code> will
differ.</p>
</div>


</div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    
<ul><li><p>McElreath, R. (2020). Statistical rethinking: A Bayesian course with
examples in R and Stan. CRC press.</p></li>
<li><p>Rouder, J. N., Morey, R. D., Speckman, P. L., &amp; Province, J. M. (2012).
Default Bayes factors for ANOVA designs. <em>Journal of Mathematical
Psychology</em>, 56(5), 356-374. https://doi.org/10.1016/j.jmp.2012.08.001</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">contr.orthonorm</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span> <span class="co"># Q_2 in Rouder et al. (2012, p. 363)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            [,1]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,] -0.7071068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]  0.7071068</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">contr.orthonorm</span><span class="op">(</span><span class="fl">5</span><span class="op">)</span> <span class="co"># equivalent to Q_5 in Rouder et al. (2012, p. 363)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            [,1]       [,2]       [,3]       [,4]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]  0.0000000  0.8944272  0.0000000  0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]  0.0000000 -0.2236068 -0.5000000  0.7071068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]  0.7071068 -0.2236068 -0.1666667 -0.4714045</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,] -0.7071068 -0.2236068 -0.1666667 -0.4714045</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]  0.0000000 -0.2236068  0.8333333  0.2357023</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## check decomposition</span></span></span>
<span class="r-in"><span><span class="va">Q3</span> <span class="op">&lt;-</span> <span class="fu">contr.orthonorm</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Q3</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="va">Q3</span><span class="op">)</span> <span class="co">## 2/3 on diagonal and -1/3 on off-diagonal elements</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            [,1]       [,2]       [,3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]  0.6666667 -0.3333333 -0.3333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,] -0.3333333  0.6666667 -0.3333333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,] -0.3333333 -0.3333333  0.6666667</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://dominiquemakowski.github.io/" class="external-link">Dominique Makowski</a>, <a href="https://github.com/strengejacke" class="external-link">Daniel Lüdecke</a>, <a href="https://github.com/mattansb" class="external-link">Mattan S. Ben-Shachar</a>, <a href="https://sites.google.com/site/indrajeetspatilmorality/" class="external-link">Indrajeet Patil</a>, <a href="http://www.humanfactors.io" class="external-link">Michael D. Wilson</a>, Brenton M. Wiernik.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

